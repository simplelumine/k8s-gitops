apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-staging
spec:
  acme:
    # Let's Encrypt Staging 服务器（用于测试）
    # 生产环境请使用: https://acme-v02.api.letsencrypt.org/directory
    server: https://acme-staging-v02.api.letsencrypt.org/directory

    # 用于接收证书过期通知的邮箱
    # 请替换为您的真实邮箱
    email: chemistryjhyq7784213@gmail.com

    # 用于存储 ACME 账户私钥的 Secret
    # 注意：这个 Secret 会由 cert-manager 自动创建，您不需要手动创建
    privateKeySecretRef:
      name: letsencrypt-staging-account-key

    # DNS-01 挑战配置（使用 Cloudflare）
    solvers:
    - dns01:
        cloudflare:
          # 引用加密的 API Token
          apiTokenSecretRef:
            name: cloudflare-api-token-secret
            key: api-token

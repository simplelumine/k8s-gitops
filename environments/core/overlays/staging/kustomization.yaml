apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Staging 环境 - 核心基础设施配置

# 注意：core 基础设施组件通常部署到各自的 namespace
# 不设置全局 namespace，让每个组件使用自己定义的 namespace

# 引用 base 配置
resources: []
  # - ../../base/portainer-agent
  # - ../../base/cert-manager
  # - ../../base/longhorn
  # - ../../base/cloudnative-pg
  # - ../../base/redis-operator
  # - ../../base/tailscale-operator

# 环境特定的补丁（覆盖 base 配置）
# patches:
#   - path: cert-manager-patch.yaml
#     target:
#       kind: HelmRelease
#       name: cert-manager

# 环境特定的 ConfigMap
# configMapGenerator:
#   - name: staging-config
#     literals:
#       - environment=staging

# SOPS 加密的 Secret
# secretGenerator:
#   - name: staging-secrets
#     files:
#       - secrets/example.enc.yaml
